import{_ as u,o as i,c as n,a as e,F as $,f,n as y,t as l,g as M,d as x,p as H,h as b,i as E,e as p,w as A,v as V,j as m,k as B,r as _,b as D}from"./_plugin-vue_export-helper-bd14bd3e.js";import{N as k,U as L,S as Z}from"./SolicitudModal-9d12739f.js";const I={__name:"DashBoard",data(){return{active:"materias",items:[{id:"materias",nombre:"Materias",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 8H20V5H4V8ZM14 19V10H10V19H14ZM16 19H20V10H16V19ZM8 19V10H4V19H8ZM3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3Z"></path></svg>'},{id:"mapa-curricular",nombre:"Mapa curricular",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3C19.6569 3 21 4.34315 21 6C21 7.65685 19.6569 9 18 9H15C13.6941 9 12.5831 8.16562 12.171 7.0009L11 7C9.9 7 9 7.9 9 9L9.0009 9.17102C10.1656 9.58312 11 10.6941 11 12C11 13.3059 10.1656 14.4169 9.0009 14.829L9 15C9 16.1 9.9 17 11 17L12.1707 17.0001C12.5825 15.8349 13.6937 15 15 15H18C19.6569 15 21 16.3431 21 18C21 19.6569 19.6569 21 18 21H15C13.6941 21 12.5831 20.1656 12.171 19.0009L11 19C8.79 19 7 17.21 7 15H5C3.34315 15 2 13.6569 2 12C2 10.3431 3.34315 9 5 9H7C7 6.79086 8.79086 5 11 5L12.1707 5.00009C12.5825 3.83485 13.6937 3 15 3H18ZM18 17H15C14.4477 17 14 17.4477 14 18C14 18.5523 14.4477 19 15 19H18C18.5523 19 19 18.5523 19 18C19 17.4477 18.5523 17 18 17ZM8 11H5C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13H8C8.55228 13 9 12.5523 9 12C9 11.4477 8.55228 11 8 11ZM18 5H15C14.4477 5 14 5.44772 14 6C14 6.55228 14.4477 7 15 7H18C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5Z"></path></svg>'},{id:"ayuda",nombre:"Ayuda",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM13 13.3551V14H11V12.5C11 11.9477 11.4477 11.5 12 11.5C12.8284 11.5 13.5 10.8284 13.5 10C13.5 9.17157 12.8284 8.5 12 8.5C11.2723 8.5 10.6656 9.01823 10.5288 9.70577L8.56731 9.31346C8.88637 7.70919 10.302 6.5 12 6.5C13.933 6.5 15.5 8.067 15.5 10C15.5 11.5855 14.4457 12.9248 13 13.3551Z"></path></svg>'}]}},computed:{console:()=>console,window:()=>window,document:()=>document},methods:{changeActive(t){this.$emit("active-changed",t),this.active=t}}},N={id:"dashboard"},P={id:"menu"},j=["id","onClick"],T=["innerHTML"],R={class:"dashboard-label"};function G(t,a,o,c,d,r){return i(),n("section",N,[e("ul",P,[(i(!0),n($,null,f(d.items,s=>(i(),n("li",{class:y(["item",{active:this.active==s.id}]),id:s.id,onClick:h=>r.changeActive(s.id)},[e("i",{class:"dashboard-icon",innerHTML:s.icon},null,8,T),e("a",R,l(s.nombre),1)],10,j))),256))])])}const O=u(I,[["render",G]]);const U={name:"Materias",props:{materias:Array},data(){return{solicitudes:[]}},emits:["solicitud"],methods:{submitSolicitudes(){this.$emit("solicitud",this.solicitudes)},toggleSolicitud(t){t.solicitada=!t.solicitada}},updated(){this.solicitudes=[];for(let t of this.$props.materias)t.solicitada&&this.solicitudes.push(t)}},w=t=>(H("data-v-4385759e"),t=t(),b(),t),q={class:"content"},F={key:0},z=x('<h2 class="HeaderMaterias" data-v-4385759e>Materias Pendientes</h2><div class="container-wrapper" data-v-4385759e><div class="container1" data-v-4385759e><p data-v-4385759e>PG - Promedio General</p><p data-v-4385759e>ES - Estado</p><p data-v-4385759e>CR - Creditos</p><p data-v-4385759e>B - Bajas</p><p data-v-4385759e>A - Aprobación</p></div><div class="container2" data-v-4385759e><p data-v-4385759e>R - Requisitos</p><p data-v-4385759e>C - Cursados</p><p data-v-4385759e>SEM - Semestre</p><p data-v-4385759e>I - Intentos</p><p data-v-4385759e>S - Seleccionar</p></div></div><br data-v-4385759e>',3),J={class:"materias-table"},Y=w(()=>e("thead",null,[e("tr",null,[e("th",{class:"nombre-materia"},"Materias Pendientes"),e("th",null,"PG"),e("th",null,"ES"),e("th",null,"CR"),e("th",null,"B"),e("th",null,"A"),e("th",null,"R"),e("th",null,"C"),e("th",null,"SEM"),e("th",null,"I"),e("th",null,"SE")])],-1)),K={class:"nombre-materia"},Q=["checked","onClick"],W=w(()=>e("br",null,null,-1));function X(t,a,o,c,d,r){return i(),n("div",q,[this.materias.length>0?(i(),n("div",F,[z,e("table",J,[Y,e("tbody",null,[(i(!0),n($,null,f(o.materias,s=>(i(),n("tr",{key:s.id},[e("td",K,l(s.descripcion),1),e("td",null,l(s.promedioMateria),1),e("td",null,l(s.estado),1),e("td",null,l(s.creditos),1),e("td",null,l(s.alumnosBajas),1),e("td",null,l(s.porcentajeDeAprobacion),1),e("td",null,l(s.req),1),e("td",null,l(s.alumnosInscritos),1),e("td",null,l(s.semestre),1),e("td",null,l(s.intentos),1),e("td",null,[e("input",{type:"checkbox",name:"",id:"",checked:s.solicitada,onClick:h=>this.toggleSolicitud(s)},null,8,Q)])]))),128))])]),W,e("button",{class:"btn",type:"submit",onClick:a[0]||(a[0]=(...s)=>this.submitSolicitudes&&this.submitSolicitudes(...s))},"Enviar")])):M("",!0)])}const v=u(U,[["render",X],["__scopeId","data-v-4385759e"]]);const tt={name:"MapaCurricular"},et={class:"content"},st=e("h2",{class:"titulo"},"Mapa Curricular",-1),at=e("h2",{class:"carrera"},[E("Ingeniería en "),e("span",{class:"blue"},"Sistemas de Información")],-1),ot=[st,at];function it(t,a,o,c,d,r){return i(),n("div",et,ot)}const C=u(tt,[["render",it]]),nt={name:"Elecciones"},ct={class:"content"},lt=e("h1",null,"ELECCIONES",-1),dt=e("p",null,"Esta es la página de elecciones",-1),rt=[lt,dt];function ut(t,a,o,c,d,r){return i(),n("div",ct,rt)}const ht=u(nt,[["render",ut]]),_t={name:"Ayuda"},pt={class:"content"},mt=e("h1",null,"AYUDAAAAAA",-1),vt=[mt];function Ct(t,a,o,c,d,r){return i(),n("div",pt,vt)}const g=u(_t,[["render",Ct]]);async function gt(t,a){const c=await(await fetch(`/api/alumno/datos-alumno/${t}`)).json();a(c)}async function $t(t){return fetch(`/api/materia/consultar-solicitudes/${t}`)}async function ft(t){return fetch(`/api/materia/materias-pendientes/${t}`)}async function Mt(t,a){Promise.all([ft(t),$t(t)]).then(async([o,c])=>[await o.json(),await c.json()]).then(o=>{a(...o)})}function wt(t){return fetch(`/api/materia/elimina-solicitudes/${t}`)}async function St(t){const a=new Headers({"Content-Type":"application/json"});return console.log(t),fetch("/api/materia/solicitar",{method:"POST",body:JSON.stringify(t),headers:a})}const yt={components:{NavBar:k,UserMenu:L,DashBoard:O,Materias:v,MapaCurricular:C,Elecciones:ht,Ayuda:g,SolicitudModal:Z},data(){return{expediente:221202715,user:{},materias:[],solicitudes:[],active:"materias",views:{materias:v,"mapa-curricular":C,ayuda:g},loading:!0,console,modal:!1,solicitudExitosa:!1}},methods:{showError(t){this.console.log(t),setTimeout(()=>{this.toggleLoader(),this.solicitudExitosa=!1,this.modal=!0},1e3)},showSuccess(t){if(this.console.log(t),!t.ok)return this.showError(t);setTimeout(()=>{this.toggleLoader(),this.solicitudExitosa=!0,this.modal=!0},1e3)},changeView(t){this.active=t},loadDatosAlumno(t){this.user=t},loadMateriaData(t,a){for(let o of t)for(let c of a)o.clave==c.clave&&(o.solicitada=!0);this.solicitudes=a,this.materias=t,this.toggleLoader()},sendSolicitud(t){this.toggleLoader();let a=[];t.forEach(o=>{a.push({clave:o.clave,descripcion:o.descripcion})}),wt(this.expediente).then(o=>{o.ok?(this.console.log(a),St({expediente:this.expediente,campus:this.user.campus,materias:a}).then(this.showSuccess).catch(this.showError)):this.showError(o)}).catch(this.showError)},toggleLoader(){this.loading=!this.loading}},mounted(){gt(this.expediente,this.loadDatosAlumno),Mt(this.expediente,this.loadMateriaData)}},xt={id:"panel"},Ht={class:"loader",viewBox:"25 25 50 50"},bt=e("circle",{r:"20",cy:"50",cx:"50"},null,-1),Et=[bt];function At(t,a,o,c,d,r){const s=_("NavBar"),h=_("DashBoard"),S=_("SolicitudModal");return i(),n("main",xt,[p(s,{userData:this.user},null,8,["userData"]),p(h,{onActiveChanged:r.changeView},null,8,["onActiveChanged"]),A((i(),n("svg",Ht,Et,512)),[[V,this.loading]]),this.modal?(i(),m(S,{key:0,onClose:a[0]||(a[0]=Bt=>this.modal=!1),estado:this.solicitudExitosa},null,8,["estado"])):M("",!0),(i(),m(B(d.views[d.active]),{materias:this.materias,onSolicitud:this.sendSolicitud},null,40,["materias","onSolicitud"]))])}const Vt=u(yt,[["render",At]]);D(Vt).mount("#app");
